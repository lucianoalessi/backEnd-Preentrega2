<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-12">
            <h2 class="mb-3 text-center">
                <i class="fas fa-user-circle"></i> Bienvenido a nuestra tienda, {{user.first_name}} {{user.last_name}}!
            </h2>
            <h4>
                <i class="fas fa-info-circle"></i> Aquí están tus datos de usuario:
            </h4>
            <ul class="list-group mb-4">
                <li class="list-group-item">
                    <i class="fas fa-id-badge"></i> ID de usuario: {{user._id}}
                </li>
                <li class="list-group-item">
                    <i class="fas fa-envelope"></i> Correo electrónico: {{user.email}}
                </li>
                <li class="list-group-item">
                    <i class="fas fa-birthday-cake"></i> Edad: {{user.age}}
                </li>
                <li class="list-group-item">
                    <i class="fas fa-user-tag"></i> Rol: <span id="user-role">{{user.role}}</span>
                </li>
                <li class="list-group-item">
                    <i class="fas fa-shopping-cart"></i> ID del carrito: <span id="cart-id">{{cart}}</span>
                </li>
            </ul>
            <div class="d-flex justify-content-around my-3">
                <a href="/profile" class="btn btn-outline-secondary">
                    <i class="fas fa-id-card"></i> Ver perfil
                </a>
                <a href="/chat" class="btn btn-outline-secondary">
                    <i class="fas fa-comments"></i> Abrir chat
                </a>
                <a href="/carts/{{cart}}" class="btn btn-outline-secondary">
                    <i class="fas fa-cart-arrow-down"></i> Ver carrito
                </a>
                {{#if userPremiumOrAdmin}}
                <a href="/realtimeproducts" class="btn btn-outline-secondary">
                    <i class="fas fa-clock"></i> Product Manager en tiempo real
                </a>
                {{/if}}
                <a href="/api/sessions/logout" class="btn btn-outline-danger">
                    <i class="fas fa-sign-out-alt"></i> Cerrar sesión
                </a>
            </div>
        </div>
    </div>
</div>

<div class='container mt-4'></div>
    <form id="searchForm">
        <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="Buscar productos" id="queryInput">
            <button class="btn btn-outline-secondary" type="submit">Buscar</button>
        </div>
        <div class="input-group mb-3">
            <label class="input-group-text" for="sortSelect">Ordenar por</label>
            <select class="form-select" id="sortSelect">
                <option selected>Elige...</option>
                <option value="priceAsc">Precio: Menor a Mayor</option>
                <option value="priceDesc">Precio: Mayor a Menor</option>
                <!-- Agrega más opciones de ordenamiento si lo necesitas -->
            </select>
        </div>
    </form>
</div>

<div class='container productsList mt-4'>
    <div class="row row-cols-1 row-cols-md-3 g-4">
        {{#each products.docs}}
            <div class='col'>
                <div class='card h-100' id='card-container'>
                    <div class='card-header'>
                        <small class='card-category'>
                            <i class="fas fa-tags"></i> Categoría: {{this.category}}
                        </small>
                        <small class='card-id'> Product ID: {{this._id}}</small>
                    </div>
                    <div class='card-body d-flex flex-column'>
                        <img src="{{this.thumbnail}}" class="card-img-top img-fluid" alt="{{this.title}}" style="object-fit: contain; height: 200px;">
                        <h5 class='card-title font-bold mt-2'>
                            <i class="fas fa-box-open"></i> {{this.title}}
                        </h5>
                        <div class='card-description text-truncate' id='description-{{this._id}}'>
                            <i class="fas fa-info"></i> Descripción: {{this.description}}
                        </div>
                        <button class='btn btn-link' onclick="document.getElementById('description-{{this._id}}').classList.toggle('text-truncate');">Leer más</button>
                        <h4 class='card-price'>
                            <i class="fas fa-dollar-sign"></i> {{this.price}}
                        </h4>
                        <div class='info-container'>
                            <p class='code'>
                                <i class="fas fa-barcode"></i> Product Code: {{this.code}}
                            </p>
                            <p class='stock'>
                                <i class="fas fa-warehouse"></i> Stock: {{this.stock}}
                            </p>
                        </div>
                        <button id='addToCart' class='btn btn-outline-success mt-auto'>
                            <i class="fas fa-cart-plus"></i> Agregar al carrito
                        </button>
                    </div>
                </div>
            </div>
        {{/each}}
    </div>
</div>

<div class='container pagination my-4'>
    <nav aria-label="Navegación de página">
        <ul class="pagination justify-content-center">
            {{#if products.hasPrevPage}}
                <li class="page-item">
                    <a class="page-link" href="{{products.prevLink}}" aria-label="Anterior">
                        <span aria-hidden="true">
                            <i class="fas fa-chevron-left"></i>
                        </span>
                    </a>
                </li>
            {{/if}}
            <li class="page-item active">
                <a class="page-link" href="#">{{products.page}}</a>
            </li>
            {{#if products.hasNextPage}}
                <li class="page-item">
                    <a class="page-link" href="{{products.nextLink}}" aria-label="Siguiente">
                        <span aria-hidden="true">
                            <i class="fas fa-chevron-right"></i>
                        </span>
                    </a>
                </li>
            {{/if}}
        </ul>
    </nav>
</div>
<script src="/static/js/products.js"></script>

<style>
body {
    background: linear-gradient(to bottom left, #800080 0%, black 30%, #000080 100%);
    color: white;
}
.container {
    max-width: 960px;
    margin: auto;
    padding: 20px;
}

.card {
    background-color: rgba(255, 255, 255, 0.1);
    color: white;
    border: none;
    border-radius: 10px;
    overflow: hidden;
    transition: transform .2s;
}

.card:hover {
    transform: scale(1.02);
}

.card-header {
    background-color: transparent;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.card-category, .card-id {
    font-size: 0.8rem;
}

.card-title {
    font-size: 1.2rem;
    font-weight: 500;
}

.card-description, .code, .stock {
    font-size: 0.9rem;
}



.info-container {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
}

.btn {
    border: none;
    border-radius: 50px;
    padding: 10px 20px;
    transition: background-color .2s;
}

.btn-outline-success {
    background-color: transparent;
    color: #28a745;
}

.btn-outline-success:hover {
    background-color: #28a745;
    color: white;
}

.btn-outline-secondary {
    background-color: transparent;
    color: #6c757d;
}

.btn-outline-secondary:hover {
    background-color: #6c757d;
    color: white;
}

.btn-outline-danger {
    background-color: transparent;
    color: #dc3545;
}

.btn-outline-danger:hover {
    background-color: #dc3545;
    color: white;
}
</style>





{{!-- <style>
body {
    font-family: Arial, sans-serif;
    background-color: #ededed;
}

.container {
    background-color: #fff;
    border-radius: 5px;
    padding: 20px;
    margin-top: 20px;
}

h3 {
    color: #333;
}

h4 {
    color: #555;
}

.list-group-item {
    border: none;
    padding: 10px 15px;
    color: #333;
}

.btn-outline-secondary {
    border-color: #3483fa;
    color: #3483fa;
}

.btn-outline-secondary:hover {
    background-color: #3483fa;
    color: #fff;
}

.btn-outline-danger {
    border-color: #ff4e50;
    color: #ff4e50;
}

.btn-outline-danger:hover {
    background-color: #ff4e50;
    color: #fff;
}

.card {
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    transition: 0.3s;
    width: 100%; /* Ajusta este valor según tus necesidades */
    margin: auto;
}

.card:hover {
    box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
}

.card-header {
    background-color: #f8f9fa;
}

.card-category {
    color: #3483fa;
}

.card-id {
    color: #6c757d;
}

.card-title {
    color: #333;
}

.card-description {
    color: #555;
}

.card-price {
    color: #28a745;
    font-weight: bold;
}

.info-container {
    color: #6c757d;
}

.btn-outline-success {
    border-color: #28a745;
    color: #28a745;
}

.btn-outline-success:hover {
    background-color: #28a745;
    color: #fff;
}

.pagination .page-item.active .page-link {
    background-color: #3483fa;
    border-color: #3483fa;
}
</style> --}}

{{!-- <div class="container mt-4">
	<div class="row justify-content-center">
		<div class="col-md-8">
			<h3 class="mb-3 text-center"><i class="fas fa-user-circle"></i> Bienvenido, {{user.first_name}} {{user.last_name}}!</h3>
			<h4><i class="fas fa-info-circle"></i> Datos de usuario:</h4>
			<ul class="list-group mb-4">
				<li class="list-group-item"><i class="fas fa-envelope"></i> userId: {{user._id}}</li>
				<li class="list-group-item"><i class="fas fa-envelope"></i> Email: {{user.email}}</li>
				<li class="list-group-item"><i class="fas fa-birthday-cake"></i> Edad: {{user.age}}</li>
				<li class="list-group-item"><i class="fas fa-user-tag"></i> Rol: {{user.role}}</li>
				<li class="list-group-item"><i class="fas fa-shopping-cart"></i> Cart ID: <span id="cart-id">{{cart}}</span></li>
			</ul>

			<div class="d-flex justify-content-around my-3">
				<a href="/profile" class="btn btn-outline-secondary"><i class="fas fa-id-card"></i> Perfil</a>
				<a href="/chat" class="btn btn-outline-secondary"><i class="fas fa-comments"></i> Chat</a>
				<a href="/carts/{{cart}}" class="btn btn-outline-secondary"><i class="fas fa-cart-arrow-down"></i> Ir al carrito</a>
				<a href="/api/sessions/logout" class="btn btn-outline-danger"><i class="fas fa-sign-out-alt"></i> Salir</a>
			</div>
		</div>
	</div>
</div>

<div class='container productsList mt-4'>
	<div class="row row-cols-1 row-cols-md-4 g-4">
		{{#each products.docs}}
			<div class='col'>
				<div class='card h-100' id='card-container'>
					<div class='card-header'>
						<small class='card-category'><i class="fas fa-tags"></i> Categoría: {{this.category}}</small>
						<small class='card-id'> {{this._id}}</small>
					</div>
					<div class='card-body d-flex flex-column align-items-start'>
						<img src="{{this.image}}" class="card-img-top" alt="{{this.title}}">
						<h5 class='card-title font-bold'><i class="fas fa-box-open"></i> {{this.title}}</h5>
						<p class='card-description'><i class="fas fa-info"></i> {{this.description}}</p>
						<p class='card-price'><i class="fas fa-dollar-sign"></i> USD {{this.price}}</p>
						<div class='info-container'>
							<p class='code'><i class="fas fa-barcode"></i> Codigo: {{this.code}}</p>
							<p class='stock'><i class="fas fa-warehouse"></i> Stock: {{this.stock}}</p>
						</div>
						<button id='addToCart' class='btn btn-outline-success mt-auto'><i class="fas fa-cart-plus"></i> Agregar al carrito</button>
					</div>
				</div>
			</div>
		{{/each}}
	</div>
</div>

<div class='container pagination my-4'>
	<nav aria-label="Page navigation">
		<ul class="pagination justify-content-center">
			{{#if products.hasPrevPage}}
				<li class="page-item">
					<a class="page-link" href="{{products.prevLink}}" aria-label="Previous">
						<span aria-hidden="true"><i class="fas fa-chevron-left"></i></span>
					</a>
				</li>
			{{/if}}
			<li class="page-item active"><a class="page-link" href="#">{{products.page}}</a></li>
			{{#if products.hasNextPage}}
				<li class="page-item">
					<a class="page-link" href="{{products.nextLink}}" aria-label="Next">
						<span aria-hidden="true"><i class="fas fa-chevron-right"></i></span>
					</a>
				</li>
			{{/if}}
		</ul>
	</nav>
	<div class="container mt-4">
		<footer style="background-color: #f0f0f0; color: #333; text-align: center; padding: 20px;">
			Desarrollado por: Luciano Alessi - Ingeniero Industrial - Back End Developer
		</footer>
	</div>
</div>
<script src='js/products.js'></script>



<style>
body {
    font-family: Arial, sans-serif;
    background-color: #f0f0f0;
} --}}

{{!-- body {
    font-family: Arial, sans-serif;
    background-color: #333;
}

.container {
    background-color: #fff;
    border-radius: 5px;
    padding: 20px;
    margin-top: 20px;
}

h3 {
    color: #333;
}

h4 {
    color: #555;
}

.list-group-item {
    border: none;
    padding: 10px 15px;
    color: #333;
}

.btn-outline-secondary {
    border-color: #007bff;
    color: #007bff;
}

.btn-outline-secondary:hover {
    background-color: #007bff;
    color: #fff;
}

.btn-outline-danger {
    border-color: #dc3545;
    color: #dc3545;
}

.btn-outline-danger:hover {
    background-color: #dc3545;
    color: #fff;
}

.card {
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    transition: 0.3s;
    width: 100%;
    border: none;
}

.card-header {
    background-color: #007bff;
    color: #fff;
}

.card-body {
    background-color: #f8f9fa;
}

.card-title {
    color: #333;
}

.card-description, .card-price, .info-container {
    color: #555;
}

#addToCart {
    background-color: #28a745;
    color: #fff;
}

#addToCart:hover {
    background-color: #218838;
    color: #fff;
}
</style> --}}


{{!-- <div>
    <h3>Bienvenido, {{user.first_name}} {{user.last_name}}!</h3>
	<h4>Datos de usuario:</h4>
    <p>Email: {{user.email}}</p>
    <p>Edad: {{user.age}}</p>
	<p>Rol: {{user.role}}</p>
	<p>Cart ID:</p>
	<p id="cart-id">{{cart}}</p>


	<form action="/profile" method="get">
		<button>Perfil</button>
	</form>
		<form action="/chat" method="get">
		<button>Chat</button>
	</form>
	<form action="/carts/{{cart}}" method="get">
		<button>Ir al carrito</button>
	</form>
	<form action="/api/sessions/logout" method="get">
		<button>Salir</button>
	</form>
	
</div>

<div class='productsList'>
	{{#products.docs}}
		<div class='card' id='card-container'>
			<div>
				<small class='card-category'>Categoría: {{this.category}}</small>
				<small class='card-id'>{{this._id}}</small>
			</div>
			<br />

			<br />
			<h3 class='card-title font-bold'>{{this.title}}</h3>
			<br />
			<p class='card-description'>{{this.description}}</p>
			<br />
			<p class='card-price'> USD {{this.price}}</p>
			<br />
			<div class='info-container'>
				<p class='code'>Codigo: {{this.code}}</p>
				<p class='stock'>Stock: {{this.stock}}</p>
			</div>
			<button id='addToCart'>agregar al carrito</button>
		</div>
	{{/products.docs}}
</div>

<div class='pagination'>
	{{#if products.hasPrevPage}}
		<a href={{products.prevLink}}> Anterior</a>
	{{/if}}
	&nbsp;
	{{products.page}}
	&nbsp;
	{{#if products.hasNextPage}}
		<a href={{products.nextLink}}>Siguiente </a>
	{{/if}}
</div>
<script src='js/products.js'></script> --}}